@(user: models.User, content: resResults.ContentResult) 
@import java.util._ 
@import java.text.SimpleDateFormat._

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<meta charset="utf-8">
<title>크리스천</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles -->
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<link href="../assets/css/font-awesome.css" rel="stylesheet">
<link href="../assets/css/font-awesome.min.css" rel="stylesheet">
<link href="../assets/css/home.css" rel="stylesheet">

<!-- Le javascript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/jquery.form.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>

<script type="text/javascript">

var scroll_load = {
		locked: false,
		event: function() {
			thisObject = this;
			$(window).scroll(function () {
				if(($(window).scrollTop() > $(document).height() * 0.8) && !thisObject.locked) {
					thisObject.locked = true;
	        		$.ajax({
	        			url: "/more",
	        			type: "POST",
	        			data: {target_id : @user.id, target_content_id : $("[name=content_id]:last").val(), openLevel : 1},
	        			dataType: "html",
	        			error: function() {
	        				thisObject.locked = false;
	        			},
	        			success: function(data) {
	        				if(data.length > 68){
	        					thisObject.locked = false;
	        					$("#mother").append(data);
	        					thisObject.reload();
	        				}
	        			}
	        		});
	        	}
			});
		},
		
		reload: function() {
			$('#thumbnail .container .thumb').unbind();
			$("#content-box_in > a").unbind();
			$("#modify").unbind();
			$("[name=modifybutton]").unbind();
			$("[name=modifycancelbutton]").unbind();
			$("#content_delete").unbind();
			$("#ban").unbind();
			$(".reply_td a").unbind();
			$("#reply_delete_confirm").unbind();
			$("[name=like]").unbind();
			$("[name=replying]").unbind();
			$("[name=repple]").unbind();
			$(".gallery").unbind();
			$(".like_text").unbind();
			
			
			$(".like_text").click(function() {
				$.ajax({
					url: "/like",
					type: "POST",
					data: {content_id: $(this).attr("like_id")},
					dataType: "html",
					error: function() {
					},
					success: function(data) {
						$(document).on('click.control',function(e) {
							if ($(e.target).parents('.gallery-tool').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("gallery-tool") < 0)) {
								$(".gallery-tool").remove();
								$(document).unbind('click.control');}
						});
				 		
						$("body").append("<div class='gallery-tool hidden' style='position:fixed;'></div>");
						$(".gallery-tool").append(data);	 
						
						$(".gallery-tool").css({
				       		width: $(window).width() + "px",
				       		height: $(window).height()+ "px"
						});
						
						$("#like_get").css({
					  		left: (($(window).width() - 300) / 2) + "px",
				       		top: (($(window).height() - 600) / 2) + "px"
						});
						
		  
						$(".gallery-tool").removeClass("hidden");
						$(".gallery-tool").show();
						return false;
					}				
				});	
			});
			
			$(".gallery").click(function() {
		 		$(document).on('click.control',
						function(e) {
					if ($(e.target).parents('.gallery-tool').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("gallery-tool") < 0)) {
						$(".gallery-tool").remove();
						$(document).unbind('click.control');}
				});
		 		
		 		
				
				$("body").append("<div class='gallery-tool hidden' style='position:fixed;'><div><div class='gallery-box'><img id='gallery-in' style='opacity:1;' src=''></div></div></div>");
				
				$(".gallery-tool").css({
		       		width: $(window).width() + "px",
		       		height: $(window).height()+ "px"
				});
				
			 	 $("#gallery-in").attr("src", $(this).attr("src").replace("thumbnail_", "")).load(function(){
					$(".gallery-box").css({
			       		left: (( $(window).width() - $("#gallery-in").width() ) / 2) + "px",
			       		top: (( $(window).height() - $("#gallery-in").height() ) / 2) + "px"
					});
				});  
					$(".gallery-tool").removeClass("hidden");
					$(".gallery-tool").show();
				return false;
			});

			
			
			$('#thumbnail .container .thumb').on('click', function(){
				var id = $(this).parents("ul").attr("name");
		 		var image = $('[img_content_id=' + id + ']');
				image.attr('src', $(this).children("img").attr("src")); 
			});
			
			$("#content-box_in > a").click(
					function(e) {
						var content_id = $(this).attr("content_id");
						var modifybox = $("[modify_content_id=" + content_id + "]");
						var modifycontens = $("[contens_content_id=" + content_id + "]");
						e.preventDefault();
						$(document).on('click.control',
								function(e) {
							if ($(e.target).parents('.edit-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("edit-box") < 0)) {
								$(".edit-box").remove();
								$(document).unbind('click.control');}
						});
						if($(this).attr("user_id") == @user.id){
							$("body").append("<div class='edit-box hidden'><ul class='list'><li><a id ='modify'>수정하기</a></li><li><a id='content_delete'>삭제하기</a></li></ul></div>");
							$(".edit-box").css({
								top : $(this).offset().top + 18,
								left : $(this).offset().left - 40
							});
							$(".edit-box").removeClass("hidden");
							$(".edit-box").fadeIn(300);

							$("#modify").click(function() {
								if ($(modifybox).is(":hidden")) {
									$(modifybox).css({
										display : "none"
									});
									$(modifybox).removeClass("hidden");
									$(modifybox).show(300);
									$(modifycontens).addClass("hidden");
									$(".edit-box").remove();
									$(document).unbind('click.control');

								} else {
									$(modifybox).hide(300, function() {
										$(modifycontens).css({
											display : "none"
										});
										$(modifycontens).removeClass("hidden");
										$(modifycontens).show(300);
										$(modifybox).addClass("hidden");
										$(".edit-box").remove();
										$(document).unbind('click.control');
									});
								}

								$("[name=modifybutton]").click(function(){
									$.ajax({
										url: "/content/modify",
										type: "POST",
										data: {user_id : @user.id, content_id : content_id, openLevel : 1, contents : $("[textarea_in=" + content_id + "]").val()},
										dataType: "json",
										success: function(data) {
											$("body").append("<div id='toast'><b>수정되었습니다.</b></div>");
											var timer = setInterval(function () {
												$("#toast").remove();
												clearInterval(timer);
											}, 1000);
											
											$(modifycontens).css({
												display : "none"
											});
											$(modifycontens).removeClass("hidden");
											$(modifycontens).show(300);
											$(modifybox).addClass("hidden");
											modifycontens.html("<h5 id='contents' contens_content_id='" + content_id + "'>" + data.body[0].contents +"</h5>");
										}
									});
								});

								$("[name=modifycancelbutton]").click(function(){
									$(modifycontens).css({
										display : "none"
									});
									$(modifycontens).removeClass("hidden");
									$(modifycontens).show(300);
									$(modifybox).addClass("hidden");
								});
							});

							$("#content_delete").click(function(){
								$.ajax({
									url: "/content/delete",
									type: "POST",
									data: {content_id : content_id},
									dataType: "json",
									success: function(data) {
										$("body").append("<div id='toast'><b>삭제되었습니다.</b></div>");
										var timer = setInterval(function () {
											$("#toast").remove();
											clearInterval(timer);
										}, 1000);
										$("[contentbox = " + content_id +"]").remove();
										$(".edit-box").remove();
										$(document).unbind('click.control');
									}
								});
							});
							return false;
						}else{
							$("body").append("<div class='edit-box hidden'><ul class='list'><li><a id='ban'>신고하기</a></li></ul></div>");
							$(".edit-box").css({
								top : $(this).offset().top + 18,
								left : $(this).offset().left - 40
							});
							$(".edit-box").removeClass("hidden");
							$(".edit-box").fadeIn(300);
							$("#ban").click(function(){
								$.ajax({
									url: "/content/ban",
									type: "POST",
									data: {user_id : @user.id, content_id : content_id},
									dataType: "json",
									success: function(data) {
										$("body").append("<div id='toast'><b>신고되었습니다.</b></div>");
										var timer = setInterval(function () {
											$("#toast").remove();
											clearInterval(timer);
										}, 1000);
										$(".edit-box").remove();
										$(document).unbind('click.control');
									}
								});
							});
							return false;
						}
					});

			$(".reply_td a").click( function(e) {
				e.preventDefault();
				var reply_id = $(this).attr("name");
				var reply_get_contents_id = $(this).attr("reply_get_contents_id");
				$(document).on('click.control',
						function(e) {
					if ($(e.target).parents('.reply-delete-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("reply-delete-box") < 0)) {
						$(".reply-delete-box").remove();
						$(document).unbind('click.control');}
				});

				$("body").append("<div class='reply-delete-box hidden'><ul class='list'><li><a id = 'reply_delete_confirm'>댓글삭제</a></li></ul></div>");
				$(".reply-delete-box").css({
					top : $(this).offset().top + 18,
					left : $(this).offset().left - 40
				});
				$(".reply-delete-box").removeClass("hidden");
				$(".reply-delete-box").fadeIn(300);

				$("#reply_delete_confirm").click(function(){
					$.ajax({
						url: "/reply/delete",
						type: "POST",
						data: {user_id : @user.id, reply_id : reply_id},
						dataType: "json",
						success: function(data) {
							$("body").append("<div id='toast'><b>댓글이 삭제되었습니다.</b></div>");
							var timer = setInterval(function () {
								$("#toast").remove();
								clearInterval(timer);
							}, 1000);
							$("[replies_content_id =" +reply_id+"]").remove();
							$("[replycounted=" + reply_get_contents_id +"]").html("<b replycounted = '" + reply_get_contents_id +"' style='color: gray;'>" + data.web_reply_count +"</b>");
							$(".reply-delete-box").remove();
							$(document).unbind('click.control');
							
						}
					});
				});
				return false;
			});



			$("[name=like]").click(function() {
				$.ajax({
					url: "/content/like",
					type: "POST",
					data: { content_id: $(this).attr("like_content_id"), user_id : @user.id },
					dataType: "json",
					error: function() {

					},
					success: function(data) {
						if(data.msg == "추천을 취소하였습니다."){
							$("[like_content_id=" + data.body[0].id +"]").html("<button type='button' name='like' style='color: white; display: inline-block; text-decoration: none; background-color: #FF8742; border: 0; border-radius: 5px; height: 30px; padding: 0;' like_content_id=" + data.body[0].id + "><i class='fa fa-thumbs-o-up' style='display: inline;'></i> 좋아요 </button>");
							$("[likecount=" + data.body[0].id +"]").html("<b likecount = " + data.body[0].id + "style='color: gray;'>" + data.body[0].likeCount + "</b>");
						}else{
							$("[like_content_id=" + data.body[0].id +"]").text("좋아요 취소").css("color","white");
							$("[likecount=" + data.body[0].id +"]").html("<b likecount = " + data.body[0].id + "style='color: gray;'>" + data.body[0].likeCount + "</b>");
						} 
					}				
				}); 			
			});


			$("[name=replying]").keypress(function(e) {
				if(e.which == 13) 
					$(this).parent().find("[name=repple]").click()			
			});

			$("[name=repple]").click(function() {
				if($(this).parent().find("[name=replying]").val().length == 0){
					$("body").append("<div id='toast'><b>댓글 내용을 채워주세요.</b></div>");
					var timer = setInterval(function () {
						$("#toast").remove();
						clearInterval(timer);
					}, 2000);
					return false;
				}else{
					$.ajax({
						url: "/reply/upload",
						type: "POST",
						data: {user_id : @user.id, content_id: $(this).attr("content_id"), contents: $(this).parent().find("[name=replying]").val()},
						dataType: "json",
						error: function() {
							
						},
						success: function(data) {
							if(data.body[0].replyCount ==1){
								$("[replybox =" + data.body[0].id + "]").css("border-radius", "0");
							}
							$("[replying =" + data.body[0].id + "]").val("");
							$("[reply_content_id =" + data.body[0].id + "]").css("border-radius", "0");
							$("[reply_content_id =" + data.body[0].id + "]").append("<div replies_content_id = '" + data.replies[0].id + "' style='padding: 0 10px 10px 10px; border-bottom: 1px solid #e2e2e2;'><TABLE><TR><TD style='width: 60px; vertical-align: top;'><a href='/neighbordiary/" + data.replies[0].user.id + "'><img class='ripple' src='/image/" + data.replies[0].user.image_url1 + "'/> </a></TD> <TD id='reply_td' class = 'reply_td' style='padding: 10px; width: 87%; vertical-align: top;'><b style='font-weight: bold; color: black; font-size: 13px; color: rgb(79, 189, 158)'>" + data.replies[0].user.nickname + "</b> <b style='color: gray; font-size: 11px;'>"+ data.replies[data.body[0].replyCount - 1].createDate +"</b> <a style='font-size: 13px; float: right; color: rgb(79, 189, 158)' href='#' name='" + data.replies[0].id +"'reply_get_contents_id = '" + data.body[0].id  + "'> <i class='fa fa-minus-square'></i> </a> <b style='display: block; font-size: 12px;'>" + data.replies[0].contents +"</b></TD></TR></TABLE></div>");
							$("[replycounted=" + data.body[0].id +"]").html("<b replycounted = '" + data.body[0].id +"' style='color: gray;'>" + data.body[0].replyCount +"</b>");
							$("[replying =" + data.body[0].id + "]").focus();
							$("[reply_content_id =" + data.body[0].id + "]").css("border-radius", "0 0 8px 8px");
							
							$(".reply_td a").unbind();
							
							$(".reply_td a").click( function(e) {
								e.preventDefault();
								var reply_id = $(this).attr("name");
								var reply_get_contents_id = $(this).attr("reply_get_contents_id");
								$(document).on('click.control',
										function(e) {
									if ($(e.target).parents('.reply-delete-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("reply-delete-box") < 0)) {
										$(".reply-delete-box").remove();
										$(document).unbind('click.control');}
								});

								$("body").append("<div class='reply-delete-box hidden'><ul class='list'><li><a id = 'reply_delete_confirm'>댓글삭제</a></li></ul></div>");
								$(".reply-delete-box").css({
									top : $(this).offset().top + 18,
									left : $(this).offset().left - 40
								});
								$(".reply-delete-box").removeClass("hidden");
								$(".reply-delete-box").fadeIn(300);

								$("#reply_delete_confirm").click(function(){
									$.ajax({
										url: "/reply/delete",
										type: "POST",
										data: {user_id : @user.id, reply_id : reply_id},
										dataType: "json",
										success: function(data) {
											$("body").append("<div id='toast'><b>댓글이 삭제되었습니다.</b></div>");
											var timer = setInterval(function () {
												$("#toast").remove();
												clearInterval(timer);
											}, 1000);
											$("[replies_content_id =" +reply_id+"]").remove();
											$("[replycounted=" + reply_get_contents_id +"]").html("<b replycounted = '" + reply_get_contents_id +"' style='color: gray;'>" + data.web_reply_count +"</b>");
											$(".reply-delete-box").remove();
											$(document).unbind('click.control');
										}
									});
								});
								return false;
							});
						}				
					}); 
				}
			});
			
		}
	}   
			
$(function() {
	scroll_load.event();
	
	$('#thumbnail .container .thumb').on('click', function(){
		var id = $(this).parents("ul").attr("name");
 		var image = $('[img_content_id=' + id + ']');
		image.attr('src', $(this).children("img").attr("src")); 
	});
	
	
	
	var options2 = { 
			dataType: "json",
			success: function(data) {
				if(data.code == 200){
					location.reload();
				}else{
					if(!@user.image_url1.equals("")){
						location.href = '/profile_image';
					}else{
						$("body").append("<div id='toast'><b>사진을 등록해주세요.</b></div>");
						var timer = setInterval(function () {
							$("#toast").remove();
							clearInterval(timer);
						}, 1000);
					}
				}
			}
	} 
	
	
	var options = { 
			dataType: "json",
			success: function(data) {
				if(data.code == 1){
					$("#preview_1").attr("src", "/image/" + data.url);
					$("[name = image_1]").val(data.url);
				}else if(data.code == 2){
					$("#preview_2").attr("src", "/image/" + data.url);
					$("[name = image_2]").val(data.url);
				}else if(data.code == 3){
					$("#preview_3").attr("src", "/image/" + data.url);
					$("[name = image_3]").val(data.url);
				}else if(data.code == 4){
					$("#preview_4").attr("src", "/image/" + data.url);
					$("[name = image_4]").val(data.url);
				}
			}
	}
	
	var options_content = { 
			dataType: "json",
			success: function(data) {
				if(data.code == 1){
					$("#preview_content1").attr("src", "/image/" + data.url);
					$("[name = image_content_1]").val(data.url);
				}else if(data.code == 2){
					$("#preview_content2").attr("src", "/image/" + data.url);
					$("[name = image_content_2]").val(data.url);
				}else if(data.code == 3){
					$("#preview_content3").attr("src", "/image/" + data.url);
					$("[name = image_content_3]").val(data.url);
				}else if(data.code == 4){
					$("#preview_content4").attr("src", "/image/" + data.url);
					$("[name = image_content_4]").val(data.url);
				}
			}
	}
	
	var options_contens_upload = { 
			dataType: "json",
			success: function(data) {
				if(data.code == 200){
					location.reload();
				}
			}
	}
	
	$('#image_form_1').ajaxForm(options);
	$('#image_form_2').ajaxForm(options); 
	$('#image_form_3').ajaxForm(options); 
	$('#image_form_4').ajaxForm(options);
	$("#content_image_form_1").ajaxForm(options_content);
	$("#content_image_form_2").ajaxForm(options_content);
	$("#content_image_form_3").ajaxForm(options_content);
	$("#content_image_form_4").ajaxForm(options_content);

	$("#contents_form").submit(function(){
		if($("[name=contents]").val().length == 0) {
	    	$("body").append("<div id='toast'><b>본문을 채워주세요.</b></div>");
			var timer = setInterval(function () {
				$("#toast").remove();
				clearInterval(timer);
			}, 2000);
			$("[name=contents]").focus();
			return false;
		}else{
		 	$(this).ajaxSubmit(options_contens_upload);
		}
		 return false;
	});

	$("#content_commit").click(function() {
		$("#contents_form").submit();
	});
	
	$("#imageupload").submit(function(){
		 $(this).ajaxSubmit(options2);
		 return false;
	});
	
	$(".fileData2").change(function(){
		$(this).parent().parent("form").submit();
	});
	
	$(".fileData").change(function(){
		$(this).parent().parent("form").submit();

	});
	
	
	/* $("#myForm").ajaxForm({
	beforeSubmit: function() {
	    if($("[name=contents]").val().length == 0) {
	    	$("body").append("<div id='toast'><b>본문을 채워주세요.</b></div>");
			var timer = setInterval(function () {
				$("#toast").remove();
				clearInterval(timer);
			}, 2000);
			$("[name=contents]").focus();
			return false;
		}
    },
    success: function(){
    	location.reload();
    }
}); */

	$("#diary-write").click(function(e) {
		e.preventDefault();
		if ($("#textbox").is(":hidden")) {
			$("#textbox").css({
				display : "none"
			});
			$("#textbox").removeClass("hidden");
			$("#textbox").show(300);

		} else {
			$("#textbox").hide(300, function() {
				$("#textbox").addClass("hidden");
			});
		}
	});

	$("#diary-img").click(function(e) {
		e.preventDefault();
		if ($("#textbox").is(":hidden")) {
			$("#textbox").css({
				display : "none"
			});
			$("#textbox").removeClass("hidden");
			$("#textbox").show(300);

			$("#plus").css({
				display : "none"
			});
			$("#plus").removeClass("hidden");
			$("#plus").show(300);

		} else if ($("#plus").is(":hidden")) {
			$("#plus").css({
				display : "none"
			});
			$("#plus").removeClass("hidden");
			$("#plus").show(300);
		} else {
			$("#plus").hide(300, function() {
				$("#plus").addClass("hidden");
			});
		}
	});
	
	$("#text-area").click(function() {
		$("#text-area").attr("rows", 10);
		$("#write_cancel").removeClass("hidden");	
		
	});
	
	$("#write_cancel").click(function(){
		$("#text-area").attr("rows", 3);
		$("#text-area").val("");
		$(this).addClass("hidden");
		$("#plus").css({
			display : "none"
		});
	});

	$("#control-box").click(
			function(e) {
				e.preventDefault();
				
				$(document).on('click.control',
						function(e) {												
							if ($(e.target).parents('.control-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("control-box") < 0 )) {
								$(".control-box").remove();
								$(document).unbind(
								'click.control');
							}
						});
				$(".top").append("<div class='control-box hidden'><ul class='list'><li><a id='logout'>로그아웃</a></li></ul></div>");
				$("#logout").click(function(){
					$.ajax({
						url: "/logout",
						type: "POST",
						success: function(data) {
							location.href = '/';
						}
					});
				});
				$(".control-box").css({
					top : "65px",
				});
				$(".control-box").removeClass("hidden");
				$(".control-box").fadeIn(300);
				return false; 
			});

	$("#content-box_in > a").click(
			function(e) {
				var content_id = $(this).attr("content_id");
				var modifybox = $("[modify_content_id=" + content_id + "]");
				var modifycontens = $("[contens_content_id=" + content_id + "]");
				e.preventDefault();
				$(document).on('click.control',
						function(e) {
					if ($(e.target).parents('.edit-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("edit-box") < 0)) {
						$(".edit-box").remove();
						$(document).unbind('click.control');}
				});
				if($(this).attr("user_id") == @user.id){
					$("body").append("<div class='edit-box hidden'><ul class='list'><li><a id ='modify'>수정하기</a></li><li><a id='content_delete'>삭제하기</a></li></ul></div>");
					$(".edit-box").css({
						top : $(this).offset().top + 18,
						left : $(this).offset().left - 40
					});
					$(".edit-box").removeClass("hidden");
					$(".edit-box").fadeIn(300);

					$("#modify").click(function() {
						if ($(modifybox).is(":hidden")) {
							$(modifybox).css({
								display : "none"
							});
							$(modifybox).removeClass("hidden");
							$(modifybox).show(300);
							$(modifycontens).addClass("hidden");
							$(".edit-box").remove();
							$(document).unbind('click.control');

						} else {
							$(modifybox).hide(300, function() {
								$(modifycontens).css({
									display : "none"
								});
								$(modifycontens).removeClass("hidden");
								$(modifycontens).show(300);
								$(modifybox).addClass("hidden");
								$(".edit-box").remove();
								$(document).unbind('click.control');
							});
						}

						$("[name=modifybutton]").click(function(){
							$.ajax({
								url: "/content/modify",
								type: "POST",
								data: {user_id : @user.id, content_id : content_id, openLevel : 1, contents : $("[textarea_in=" + content_id + "]").val()},
								dataType: "json",
								success: function(data) {
									$("body").append("<div id='toast'><b>수정되었습니다.</b></div>");
									var timer = setInterval(function () {
										$("#toast").remove();
										clearInterval(timer);
									}, 1000);
									
									$(modifycontens).css({
										display : "none"
									});
									$(modifycontens).removeClass("hidden");
									$(modifycontens).show(300);
									$(modifybox).addClass("hidden");
									modifycontens.html("<h5 id='contents' contens_content_id='" + content_id + "'>" + data.body[0].contents +"</h5>");
								}
							});
						});

						$("[name=modifycancelbutton]").click(function(){
							$(modifycontens).css({
								display : "none"
							});
							$(modifycontens).removeClass("hidden");
							$(modifycontens).show(300);
							$(modifybox).addClass("hidden");
						});
					});

					$("#content_delete").click(function(){
						$.ajax({
							url: "/content/delete",
							type: "POST",
							data: {content_id : content_id},
							dataType: "json",
							success: function(data) {
								$("body").append("<div id='toast'><b>삭제되었습니다.</b></div>");
								var timer = setInterval(function () {
									$("#toast").remove();
									clearInterval(timer);
								}, 1000);
								$("[contentbox = " + content_id +"]").remove();
								$(".reply-delete-box").remove();
								$(document).unbind('click.control');
								$(".edit-box").remove();
								$(document).unbind('click.control');
							}
						});
					});
					return false;
				}else{
					$("body").append("<div class='edit-box hidden'><ul class='list'><li><a id='ban'>신고하기</a></li></ul></div>");
					$(".edit-box").css({
						top : $(this).offset().top + 18,
						left : $(this).offset().left - 40
					});
					$(".edit-box").removeClass("hidden");
					$(".edit-box").fadeIn(300);
					$("#ban").click(function(){
						$.ajax({
							url: "/content/ban",
							type: "POST",
							data: {user_id : @user.id, content_id : content_id},
							dataType: "json",
							success: function(data) {
								$("body").append("<div id='toast'><b>신고되었습니다.</b></div>");
								var timer = setInterval(function () {
									$("#toast").remove();
									clearInterval(timer);
								}, 1000);
								$(".edit-box").remove();
								$(document).unbind('click.control');
							}
						});
					});
					return false;
				}
			});

	$(".reply_td a").click( function(e) {
		e.preventDefault();
		var reply_id = $(this).attr("name");
		var reply_get_contents_id = $(this).attr("reply_get_contents_id");
		$(document).on('click.control',
				function(e) {
			if ($(e.target).parents('.reply-delete-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("reply-delete-box") < 0)) {
				$(".reply-delete-box").remove();
				$(document).unbind('click.control');}
		});

		$("body").append("<div class='reply-delete-box hidden'><ul class='list'><li><a id = 'reply_delete_confirm'>댓글삭제</a></li></ul></div>");
		$(".reply-delete-box").css({
			top : $(this).offset().top + 18,
			left : $(this).offset().left - 40
		});
		$(".reply-delete-box").removeClass("hidden");
		$(".reply-delete-box").fadeIn(300);

		$("#reply_delete_confirm").click(function(){
			$.ajax({
				url: "/reply/delete",
				type: "POST",
				data: {user_id : @user.id, reply_id : reply_id},
				dataType: "json",
				success: function(data) {
					$("body").append("<div id='toast'><b>댓글이 삭제되었습니다.</b></div>");
					var timer = setInterval(function () {
						$("#toast").remove();
						clearInterval(timer);
					}, 1000);
					$("[replies_content_id =" +reply_id+"]").remove();
					$("[replycounted=" + reply_get_contents_id +"]").html("<b replycounted = '" + reply_get_contents_id +"' style='color: gray;'>" + data.web_reply_count +"</b>");
					$(".reply-delete-box").remove();
					$(document).unbind('click.control');
				}
			});
		});
		return false;
	});


	$("[name=like]").click(function() {
		$.ajax({
			url: "/content/like",
			type: "POST",
			data: { content_id: $(this).attr("like_content_id"), user_id : @user.id },
			dataType: "json",
			error: function() {

			},
			success: function(data) {
				if(data.msg == "추천을 취소하였습니다."){
					$("[like_content_id=" + data.body[0].id +"]").html("<button type='button' name='like' style='color: white; display: inline-block; text-decoration: none; background-color: #FF8742; border: 0; border-radius: 5px; height: 30px; padding: 0;' like_content_id=" + data.body[0].id + "><i class='fa fa-thumbs-o-up' style='display: inline;'></i> 좋아요 </button>");
					$("[likecount=" + data.body[0].id +"]").html("<b likecount = " + data.body[0].id + "style='color: gray;'>" + data.body[0].likeCount + "</b>");
				}else{
					$("[like_content_id=" + data.body[0].id +"]").text("좋아요 취소").css("color","white");
					$("[likecount=" + data.body[0].id +"]").html("<b likecount = " + data.body[0].id + "style='color: gray;'>" + data.body[0].likeCount + "</b>");
				} 
			}				
		}); 			
	});
	


	$("[name=replying]").keypress(function(e) {
		if(e.which == 13) 
			$(this).parent().find("[name=repple]").click()			


	});

	$("[name=repple]").click(function() {
		if($(this).parent().find("[name=replying]").val().length == 0){
			$("body").append("<div id='toast'><b>댓글 내용을 채워주세요.</b></div>");
			var timer = setInterval(function () {
				$("#toast").remove();
				clearInterval(timer);
			}, 2000);
			return false;
		}else{
			$.ajax({
				url: "/reply/upload",
				type: "POST",
				data: {user_id : @user.id, content_id: $(this).attr("content_id"), contents: $(this).parent().find("[name=replying]").val()},
				dataType: "json",
				error: function() {
					
				},
				success: function(data) {
					if(data.body[0].replyCount ==1){
						$("[replybox =" + data.body[0].id + "]").css("border-radius", "0");
					}
					$("[replying =" + data.body[0].id + "]").val("");
					$("[reply_content_id =" + data.body[0].id + "]").css("border-radius", "0");
					$("[reply_content_id =" + data.body[0].id + "]").append("<div replies_content_id = '" + data.replies[0].id + "' style='padding: 0 10px 10px 10px; border-bottom: 1px solid #e2e2e2;'><TABLE><TR><TD style='width: 60px; vertical-align: top;'><a href='/neighbordiary/" + data.replies[0].user.id + "'><img class='ripple' src='/image/" + data.replies[0].user.image_url1 + "'/> </a></TD> <TD id='reply_td' class = 'reply_td' style='padding: 10px; width: 87%; vertical-align: top;'><b style='font-weight: bold; color: black; font-size: 13px; color: rgb(79, 189, 158)'>" + data.replies[0].user.nickname + "</b> <b style='color: gray; font-size: 11px;'>"+ data.replies[data.body[0].replyCount - 1].createDate +"</b> <a style='font-size: 13px; float: right; color: rgb(79, 189, 158)' href='#' name='" + data.replies[0].id +"'reply_get_contents_id = '" + data.body[0].id  + "'> <i class='fa fa-minus-square'></i> </a> <b style='display: block; font-size: 12px;'>" + data.replies[0].contents +"</b></TD></TR></TABLE></div>");
					$("[replycounted=" + data.body[0].id +"]").html("<b replycounted = '" + data.body[0].id +"' style='color: gray;'>" + data.body[0].replyCount +"</b>");
					$("[replying =" + data.body[0].id + "]").focus();
					$("[reply_content_id =" + data.body[0].id + "]").css("border-radius", "0 0 8px 8px");
					
					$(".reply_td a").unbind();
					
					$(".reply_td a").click( function(e) {
						e.preventDefault();
						var reply_id = $(this).attr("name");
						var reply_get_contents_id = $(this).attr("reply_get_contents_id");
						$(document).on('click.control',
								function(e) {
							if ($(e.target).parents('.reply-delete-box').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("reply-delete-box") < 0)) {
								$(".reply-delete-box").remove();
								$(document).unbind('click.control');}
						});

						$("body").append("<div class='reply-delete-box hidden'><ul class='list'><li><a id = 'reply_delete_confirm'>댓글삭제</a></li></ul></div>");
						$(".reply-delete-box").css({
							top : $(this).offset().top + 18,
							left : $(this).offset().left - 40
						});
						$(".reply-delete-box").removeClass("hidden");
						$(".reply-delete-box").fadeIn(300);

						$("#reply_delete_confirm").click(function(){
							$.ajax({
								url: "/reply/delete",
								type: "POST",
								data: {user_id : @user.id, reply_id : reply_id},
								dataType: "json",
								success: function(data) {
									$("body").append("<div id='toast'><b>댓글이 삭제되었습니다.</b></div>");
									var timer = setInterval(function () {
										$("#toast").remove();
										clearInterval(timer);
									}, 1000);
									$("[replies_content_id =" +reply_id+"]").remove();
									$("[replycounted=" + reply_get_contents_id +"]").html("<b replycounted = '" + reply_get_contents_id +"' style='color: gray;'>" + data.web_reply_count +"</b>");
									$(".reply-delete-box").remove();
									$(document).unbind('click.control');
								}
							});
						});
						return false;
					});
				}				
			}); 
		}
	});
	
	$(".like_text").click(function() {
		
		$.ajax({
			url: "/like",
			type: "POST",
			data: {content_id: $(this).attr("like_id")},
			dataType: "html",
			error: function() {
			},
			success: function(data) {
				$(document).on('click.control',function(e) {
					if ($(e.target).parents('.gallery-tool').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("gallery-tool") < 0)) {
						$(".gallery-tool").remove();
						$(document).unbind('click.control');}
				});
		 		
				$("body").append("<div class='gallery-tool hidden' style='position:fixed;'></div>");
				$(".gallery-tool").append(data);	 
				
				$(".gallery-tool").css({
		       		width: $(window).width() + "px",
		       		height: $(window).height()+ "px"
				});
				
				$("#like_get").css({
			  		left: (($(window).width() - 300) / 2) + "px",
		       		top: (($(window).height() - 600) / 2) + "px"
				});
				
  
				$(".gallery-tool").removeClass("hidden");
				$(".gallery-tool").show();
				return false;
			}				
		});	
	});


	$("[name=user_profile], #camera-background").click(function(){
		open_profile_image();
	});
	
	
	$(".modal-cancel").click(function(){
		$("#modal_profile_image").modal('hide')
		$("#modal_profile_image").on("hidden.bs.modal", function() {
			$(this).css({
				"z-index": -1
			});
		});

			$("#modal").modal('hide')
			$("#modal").on("hidden.bs.modal", function() {
				$(this).css({
					"z-index": -1
				});
			});

	});
	
	
	$("#my_inform").mouseover(function(){
		$("#my_modify").removeClass("hidden");
		$("#my_inform").css("background-color", "#F9FAFB");
	}).mouseout(function(){
		$("#my_modify").addClass("hidden");
		$("#my_inform").css("background-color", "#ffffff");
		
	});
	
	$("#camera-modify").mouseover(function(){
		$("#camera-background").removeClass("hidden");
	}).mouseout(function(){	
		$("#camera-background").addClass("hidden");
	});
	
	
	
	$(".gallery").click(function() {
 		$(document).on('click.control',
				function(e) {
			if ($(e.target).parents('.gallery-tool').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("gallery-tool") < 0)) {
				$(".gallery-tool").remove();
				$(document).unbind('click.control');}
		});
 		
 		
		
		$("body").append("<div class='gallery-tool hidden' style='position:fixed;'><div><div class='gallery-box'><img id='gallery-in' style='opacity:1;' src=''></div></div></div>");
		
		$(".gallery-tool").css({
       		width: $(window).width() + "px",
       		height: $(window).height()+ "px"
		});
		
	 	 $("#gallery-in").attr("src", $(this).attr("src").replace("thumbnail_", "")).load(function(){
			$(".gallery-box").css({
	       		left: (( $(window).width() - $("#gallery-in").width() ) / 2) + "px",
	       		top: (( $(window).height() - $("#gallery-in").height() ) / 2) + "px"
			});
		});  
			$(".gallery-tool").removeClass("hidden");
			$(".gallery-tool").show();
		return false;
	});
	
	
	$(".user_notice").click(function() {
		
		$.ajax({
			url: "/notification",
			type: "POST",
			data: {user_id: @user.id},
			dataType: "html",
			error: function() {
			},
			success: function(data) {
				 $(document).on('click.control',function(e) {
					if ($(e.target).parents('.notice-tool').length == 0 || ( $(e.target).attr("class") != undefined && $(e.target).attr("class").index("notice-tool") < 0)) {
						$(".notice-tool").remove();
						$(document).unbind('click.control');}
				});
		 		
				$("body").append("<div class='notice-tool hidden' style='position:fixed;'></div>");
				$(".notice-tool").append(data);	 
				
				$(".notice-tool").css({
		       		width: $(window).width() + "px",
		       		height: $(window).height()+ "px"
				});
				
				$("#notice_get").css({
			  		right: 10 + "px",
		       		top: 80 + "px"
				});
				
  
				$(".notice-tool").removeClass("hidden");
				$(".notice-tool").show();
				return false; 
			}				
		});	
	});
});


function open_win() { 
	$("#modal").css({
		"z-index": 10000
	});
	
	$("#modal").on("hidden.bs.modal", function() {
		$(this).css({
			"z-index": -1
		});
	});
	
	$("#modal").modal('show');
	
	
	$("#information_update").click(function(){
		$.ajax({
			url: "/user/userUpdate",
			type: "POST",
			data: {user_id : @user.id , memo : $("#memo").val(), job : $("#job").val(), nickname : $("#nickname").val(), gender : getRadioValue($("[name=chk_info]")), city : $("#city").val(), birth : $("#birth").val()},
			dataType: "json",
			success: function(data) {
				if(data.code == 200){
					location.reload();
				}else if(data.code == 403){
					alert("중복된 닉네임이 있습니다.");
					$("#nickname").val("");
					$("#nickname").focus();
				}
				
			}
		});
	});
}


function open_profile_image() {
	$("#modal_profile_image").css({
		"z-index": 10000
	});
	
	$("#modal_profile_image").on("hidden.bs.modal", function() {
		$(this).css({
			"z-index": -1
		});
	});
	$("#modal_profile_image").modal('show');
}



function getRadioValue(obj) {
	var len = obj.length;
	if(!len && obj.checked) {
		return obj.value;
	}

	for( var i =0, m=obj.length; i < m; i++) {
		if( obj[i].checked) {
			return obj[i].value;
		}
	}
}

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54750560-1', { 'userId': '@user.nickname' });
    ga('send', 'pageview');
    
</script>

<style type="text/css">
.intro_head {
	position: relative;
	margin-top: 60px;
}

.join_info {
	position: relative;
	width: 300px;
	margin: 0 auto;
}

.border_box {
	float: left;
	width: 100%;
}

.border_box img {
	width: 80px;
	position: absolute;
}

.border_box_in {
	border: 5px solid rgb(79, 189, 158);
	background-color : white;
	width: 100%;
	height: 400px;
	border-radius: 15px;
	margin: 20px 0 0 20px;
}

#information tr {
	height: 60px;
}

#information tr td {
	color: rgb(79, 189, 158);
	font-size: 25px;
}

#information{
	width: 700px;
}

#information input{
	width: 200px;
	height: 30px;
}


</style>
<link rel="apple-touch-icon-precomposed" sizes="144x144"
	href="../assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114"
	href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72"
	href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed"
	href="../assets/ico/apple-touch-icon-57-precomposed.png">
<link rel="shortcut icon" href="../assets/ico/thankdiary.png">
</head>

<body>
	<div class="top">
		<ul class="top_menu">
			<li style="margin-top: -10px; margin-right: 40px; margin-left: 60px;">
				<a href="/home"><img src="../assets/Img/thanks_logo_white.png"
					width="120px;" style="cursor: pointer;"></a>
			</li>
			<li><a href="/home" style="color: white;">나의일기</a></li>
			<li><a href="/opendiary">공개일기</a></li>
			<li
				style="position: absolute; padding: 0; margin-top: -30px; right: 0; margin-right: 20px;">
				<div
					style="background-color: rgb(18, 138, 120); width: 55px; height: 60px; padding: 10px; display: inline-block;">
					<img src="/image/@user.image_url1"
						style="cursor: pointer; width: 55px; height: 55px; border-radius: 5px;"
						class ="user_notice" />
				</div> <span class="nickname"
				style="color: rgb(18, 138, 120); margin-right: 15px;"> <a
					href="/home">@user.nickname</a></span> <a id="control-box" href="#"
				style="text-decoration: none;"> <img
					src="../assets/Img/logout.png" style="width: 30px;">
			</a>
			</li>
		</ul>
	</div>
	<div class="container" style="width: 1500px; position: relative; top: 80px;">
	<div class="line-back"></div>
	<div style="padding-left: 30px;">
	<div id="my_inform" style="float: left; position: relative; top: 20px; border: 2px solid rgb(79, 189, 158); border-radius: 15px; background-color: white;">
		<a id="my_modify" class="hidden" style="position:absolute; right :10px; top:10px; color: #4EBD9E;" href ="javascript:open_win();"><i class="fa fa-pencil"></i></a>
		<ul style="list-style:none; margin: 20px; color: rgb(97,117,107);">
			<li style="margin-bottom: 50px;">
				<div id="camera-modify" style="position:relative; float: left; width: 100px; height:100px;">
					<img class="img-rounded" name="user_profile" src="/image/@user.image_url1" style="width: 100px; height:100px; cursor: pointer;">
					<i style="position: absolute; bottom: 4px; left: 5px;" class="fa fa-camera"></i>
					<div id="camera-background" class="hidden" style="position : absolute; cursor: pointer; bottom :0; width: 100%; height: 30px; background-color: rgba(0,0,0,0.4); border-radius: 0 0 8px 8px;">
						<b style="color: white; font-size: 10px; padding-left: 30px;">업데이트</b>
					</div>
				</div>
				<div style="width: 100%; text-align: center;">
					<b style="display: inline-block; font-size: 25px; margin-top: 35px; margin-bottom: 20px;">@user.nickname</b>
				</div>
			</li>
			<li style="position: relative;"><img src="../assets/Img/today_word.png" style="width: 300px;" /> <div style="color:white; margin-left:35px; width:245px; position: absolute; top: 90px;">
					<h4 style="margin-bottom: 30px; line-height: 30px;">하나님이 세상을 이처럼 사랑하사, 독생자를 주셨으니, 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라.</h4>
					<h4>요한복음 3장 16절</h4>
			</div> </li>
			<li style="margin-top: 20px; margin-left: 20px;">
				<TABLE>
					<TR height="40px;">
						<TD style="width: 70px; font-size: 20px; font-weight: bold;">소속</TD>
						<TD>@user.job</TD>
					</TR>
					<TR height="40px;">
						<TD style="width: 70px; font-size: 20px; font-weight: bold;">사는곳</TD>
						<TD>@user.city</TD>
					</TR>
					<TR height="40px;">
						<TD style="width: 70px; font-size: 20px; font-weight: bold;">생일</TD>
						<TD>@user.birth</TD>
					</TR>
					<TR height="40px;">
						<TD style="width: 70px; font-size: 20px; font-weight: bold;">한마디</TD>
						<TD>@user.memo</TD>
					</TR>
				</TABLE>
			</li>
		</ul>
	</div>
	</div>
	<!--/span-->
	<div id ="mother">
		<div class="content">
			<div class="menu-box">
					<div id="textbox">
						<button type="button" id ="write_cancel" class="hidden"
							style="position: absolute; background-color: r #CDCCCB; border: 0; margin-right: 10px; border-radius: 5px; right: 0; margin-top: 10px;">
							<span style="color: white;"><i class="fa fa-times"></i></span>
						</button>
							<div class="write-box">
								<form id="contents_form" action="/contentimageupload" method="post" name="form">
									<textarea id="text-area" class="form-control" placeholder="오늘 감사했던 이야기를 들려주세요" name="contents" rows="3" cols="50"
										style="width: 453px; border: 0; border-radius: 8px 8px 0 0; padding-right: 37px; padding-top: 10px;"></textarea>
									<input type="text" name="user_id" value="@user.id" style="display: none;" />
									<input type="text" name="openLevel" value="1" style="display: none;" />
									<input type="text" name="image_content_1" value="" style="display: none;" />
									<input type="text" name="image_content_2" value="" style="display: none;" />
									<input type="text" name="image_content_3" value="" style="display: none;" />
									<input type="text" name="image_content_4" value="" style="display: none;" />
								</form>
							</div>
							<div id="plus" class="hidden"
								style="margin-top: 10px; margin-bottom: 10px;">
								<div class="container">
									<ul>
										<li class="thumb">
											<form id="content_image_form_1" action="/tempimagecontentupload" method="post" name="form">
												<span class="buttonWrap"> 
													<input type="file" class="fileData" name="1" />
													<input type="text" name="user_id" value="@user.id" style="display: none;" />
													<input type="text" name="num" value="1" style="display: none;" />
													<img id="preview_content1" class="preview" src="../assets/Img/profile_img.png"/>
												</span>
											</form>
										</li>
										
										<li class="thumb">
											<form id="content_image_form_2" action="/tempimagecontentupload" method="post" name="form">
												<span class="buttonWrap"> 
													<input type="file" class="fileData" name="2" />
													<input type="text" name="user_id" value="@user.id" style="display: none;" />
													<input type="text" name="num" value="2" style="display: none;" /> 
													<img id="preview_content2" class="preview" src="../assets/Img/profile_img.png"/>
												</span>
											</form>
										</li>
										<li class="thumb">
											<form id="content_image_form_3" action="/tempimagecontentupload" method="post" name="form">
												<span class="buttonWrap"> 
													<input type="file" class="fileData" name="3" />
													<input type="text" name="user_id" value="@user.id" style="display: none;" />
													<input type="text" name="num" value="3" style="display: none;" /> 
													<img id="preview_content3" class="preview" src="../assets/Img/profile_img.png"/>
												</span>
											</form>
										</li>
										<li class="thumb">
											<form id="content_image_form_4" action="/tempimagecontentupload" method="post" name="form">
												<span class="buttonWrap"> 
												<input type="file" class="fileData" name="4" />
												<input type="text" name="user_id" value="@user.id" style="display: none;" />
												<input type="text" name="num" value="4" style="display: none;" />
												<img id="preview_content4" class="preview" src="../assets/Img/profile_img.png"/>
												</span>
											</form>		
										</li>
									</ul>
								</div>
							</div>
							<div class="button-box">
								<a style="display: inline-block; width: 30px; margin-left: 10px; text-decoration: none" id="diary-img" href="#"> 
									<img src="/assets/Img/camera.png" style="cursor: pointer;" />
								</a>
								<div style="float: right;">
									<button id="content_commit"
										style="display: inline-block; text-decoration: none; background-color: rgb(79, 189, 158); border: 0; margin-right: 5px; border-radius: 5px; height: 30px; width: 80px;">
										<span style="color: white;"> <i class="fa fa-paper-plane" style="display: inline;"> </i> 글쓰기
										</span>
									</button>

								</div>
							</div>
					</div>

				</div>
			@for(i <-0 until content.body.size()){
			<input type="hidden" name="content_id" value="@content.body.get(i).id" />
				<div id="content-box" class="content-box" contentbox = "@content.body.get(i).id">
					<div id = "content-box_in" style="padding: 1em; padding-bottom: 10px;">
						<div style="display: inline-block; ">
							<h4 style="padding:0; font-weight: bold; color: rgb(79, 189, 158); margin: 0;">@content.body.get(i).user.nickname</h4>
							<h6 style=" color: gray; margin: 0;">@content.body.get(i).createDate</h6>
						</div>
						<a class="fa fa-caret-square-o-down"
							style="float: right; text-decoration: none; color: rgb(79, 189, 158);"
							href="#" user_id="@content.body.get(i).user.id"
							content_id="@content.body.get(i).id"></a>

						<div id="modifybox" class="hidden"
							modify_content_id="@content.body.get(i).id">
							<div class="write-box">
								<textarea class="form-control" placeholder="이야기를 들려주세요"
									textarea_in="@content.body.get(i).id" rows="10" cols="50"
									style="width: 97%; margin-top: 15px;">@content.body.get(i).contents.toString() </textarea>
							</div>
							<div class="button-box" style="background-color: white; text-align: right;">
								<button type="button"
									name="modifybutton"
									style="display: inline-block; background-color: rgb(79, 189, 158); border: 0; margin-right: 5px; border-radius: 5px; height: 30px; width: 60px;"
									user_id="@user.id">
									<span style="color: white;">수정</span>
								</button>
								<button type="button"
									name="modifycancelbutton" style="display: inline-block; background-color: #CDCCCB; border: 0; margin-right: 5px; border-radius: 5px; height: 30px; width: 60px;">
									<span style="color: white;">취소</span>
								</button>
							</div>
						</div>
							 <h5 id="contents" contens_content_id="@content.body.get(i).id"><span style="white-space: pre-line">@content.body.get(i).contents.toString()</span></h5>
						@if(!content.body.get(i).imageURL1.isEmpty()){

						<div>
							<img id="image" img_content_id="@content.body.get(i).id" class="gallery" num = "@i" src="/image/@content.body.get(i).imageURL1" />
						</div>
						@if(!content.body.get(i).imageURL2.isEmpty()){
						<div id="thumbnail">
							<div class="container">
								<ul name="@content.body.get(i).id">
									@if(!content.body.get(i).imageURL1.isEmpty()){
									<li class="thumb"><img
										src="/image/@content.body.get(i).imageURL1"
										 /></li> }
									@if(!content.body.get(i).imageURL2.isEmpty()){
									<li class="thumb"><img
										src="/image/@content.body.get(i).imageURL2"
										 /></li> }
									@if(!content.body.get(i).imageURL3.isEmpty()){
									<li class="thumb"><img
										src="/image/@content.body.get(i).imageURL3"
										 /></li> }
									@if(!content.body.get(i).imageURL4.isEmpty()){
									<li class="thumb"><img
										src="/image/@content.body.get(i).imageURL4"
										 /></li> }

								</ul>
							</div>
						</div>
						}} <div class="like-box "> @if(content.body.get(i).isLike >0){
							<button type="button" name="like"
								style="color: white; display: inline-block; text-decoration: none; background-color: #FF8742; border: 0; border-radius: 5px; height: 30px;" like_content_id="@content.body.get(i).id">좋아요 취소</button>

								}else{
								<button type="button" name="like"
									style="color: white; display: inline-block; text-decoration: none; background-color: #FF8742; border: 0; border-radius: 5px; height: 30px;" like_content_id="@content.body.get(i).id"><i class="fa fa-thumbs-o-up" style="display: inline;"></i> 좋아요
									</button>
									}
								<div style="float: right; color: rgb(255, 99, 100);"> <b class="like_text" like_id="@content.body.get(i).id" style="cursor: pointer;"> 좋아요 </b>
								  	<b likecount = "@content.body.get(i).id" style="color: gray;">	@content.body.get(i).likeCount </b> <b style="color: #128A78;">,</b> <b style="color: rgb(255, 99, 100);">댓글</b>
									<b replycounted = "@content.body.get(i).id" style="color: gray;">@content.body.get(i).replyCount</b></div>
						</div>
					</div>
					
					
					<div reply_content_id = "@content.body.get(i).id" style="background-color: #F3F3F3; border-radius: 0 0 8px 8px;">
					@if(content.body.get(i).replyCount > 0){
						<div replybox = "@content.body.get(i).id" class="reply" style="border-radius:0;">
						<p>
							<input class="span2" type="text" name="replying" replying = "@content.body.get(i).id"
								placeholder="댓글을 입력하세요.."
								style="width: 77%; display: inline-block; margin-left: 10px; margin-top: 10px; margin-right: 5px;">

							<button type="button" name="repple"
								style="display: inline-block; text-decoration: none; background-color: #4EBD9E; border: 0; border-radius: 5px; height: 30px; width: 70px;" content_id="@content.body.get(i).id">
								<span style="color: white;"> <i class="fa fa-paper-plane"
									style="display: inline;"> </i> 댓글
								</span>
							</button>
						</p>
					</div>
					
						@for(j <- content.replies.size()-1 to 0 by -1){ 
							@if(content.replies.get(j).content_id == content.body.get(i).id){
						<div replies_content_id = "@content.replies.get(j).id" style="padding: 0 10px 10px 10px; border-bottom: 1px solid #e2e2e2;">
						<TABLE>
							<TR>
								<TD style="width: 60px; vertical-align: top;"><a
									href="/neighbordiary/@content.replies.get(j).user.id"><img
										src="/image/@content.replies.get(j).user.image_url1"
										class="ripple" /> </a></TD>
								<TD id="reply_td" class ="reply_td"
									style="padding: 10px; width: 87%; vertical-align: top;"><b
									style="font-weight: bold; color: black; font-size: 13px; color: rgb(79, 189, 158)">@content.replies.get(j).user.nickname
								</b> <b style="color: gray; font-size: 11px;">
										@content.replies.get(j).createDate </b>
									@if(content.replies.get(j).user.id == user.id){ <a
									style="font-size: 13px; float: right; color: rgb(79, 189, 158)"
									href="#" name="@content.replies.get(j).id" reply_get_contents_id = "@content.body.get(i).id"> <i
										class="fa fa-minus-square"></i> }
								</a> <b style="display: block; font-size: 12px;">
										@content.replies.get(j).contents </b></TD>
							</TR>
						</TABLE>
					</div>
					
					} } }else{
					<div replybox = "@content.body.get(i).id" class="reply ">
						<p>
							<input class="span2" type="text" name="replying" replying = "@content.body.get(i).id"
								placeholder="댓글을 입력하세요.."
								style="width: 77%; display: inline-block; margin-left: 10px; margin-top: 10px; margin-right: 5px;">

							<button type="button" name="repple"
								style="display: inline-block; text-decoration: none; background-color: #4EBD9E; border: 0; border-radius: 5px; height: 30px; width: 70px;" content_id="@content.body.get(i).id">
								<span style="color: white;"> <i class="fa fa-paper-plane"
									style="display: inline;"> </i> 댓글
								</span>
							</button>
						</p>
					</div>
					}</div>
					<div class="emoticon">
						<i class="fa fa-heart"></i>
					</div>
					
					<div class="profile">
						<a href="/neighbordiary/@content.body.get(i).user.id"><img
							src="/image/@content.body.get(i).user.image_url1"
							style="width: 100px;" /></a>
					</div>

				</div>
				}
		</div>
	</div>
	</div>


	<!--/span-->
	<div class='modal fade' id='modal' style=" display: none; z-index: -1; top: 20%; left: 35%; width: 1040px; padding: 30px 30px 50px 0; background-color: transparent; border: 0; webkit-box-shadow: 0; box-shadow: none;">
			<div class="container">
				<div class="border_box">
					<img src="/assets/Img/intro_join.png" />
					<div class="border_box_in">
					<button type="button" class="modal-cancel"
						style="position: absolute; background-color: r #CDCCCB; border: 0; margin-right: 10px; border-radius: 5px; right: 55px; margin-top: 10px;">
						<span style="color: white;"><i class="fa fa-times"></i></span>
					</button>
						<div style="margin: 60px;">
							<h2>회원가입정보</h2>
						</div>
						<div style="float: left; margin-left: 60px;">
							<TABLE id="information">
								<TR>
									<TD>닉네임</TD>
									<TD><input id="nickname" class="span2" type="text"
										placeholder="닉네임" value="@user.nickname" /></TD>
									<TD>생일</TD>

									<TD><input id="birth" type="date" min="1900-01-01"
										name="date" value="@user.birth" placeholder="1987-04-22" /></TD>
								</TR>

								<TR>
									<TD>소속</TD>
									<TD><input id="job" class="span2" type="text"
										placeholder="OO교회" value="@user.job" /></TD>
									<TD>성별</TD>

									<TD style="color: rgb(97, 117, 107); font-size: 15px;">@if(user.gender
										> 0){ 남 <input type="radio" name="chk_info" value="1"
										style="width: 20px; margin-bottom: 7px;" checked="true" /> 여
										<input type="radio" name="chk_info" value="0"
										style="width: 20px; margin-bottom: 7px;" /> }else{ 남 <input
										type="radio" name="chk_info" value="1"
										style="width: 20px; margin-bottom: 7px;" /> 여 <input
										type="radio" name="chk_info" value="0"
										style="width: 20px; margin-bottom: 7px;" checked="true" /> }
									</TD>
								</TR>

								<TR>
									<TD>사는곳</TD>

									<TD><input id="city" class="span2" type="text"
										placeholder="서울" value="@user.city" /></TD>
									<TD>한마디</TD>
									<TD><input id="memo" class="span2" type="text"
										placeholder="항상 감사합니다." value="@user.memo" /></TD>
								</TR>
							</TABLE>
						</div>
						<div style="float: right; margin-right: 70px;">
							<input type="image" id="information_update"
								src="/assets/Img/profile_img_end_btn.png"
								style="width: 60px; position: relative; top: 100px;" />
						</div>
					</div>
				</div>

			</div>
	</div>



	<div class='modal fade' id='modal_profile_image' style="z-index: -1; top: 20%; left: 35%; width: 1040px; padding: 30px 30px 50px 0; display: none; background-color: transparent; border: 0; webkit-box-shadow: 0; box-shadow: none;">
		<div class="container">
		<div class="border_box">
			<img src="/assets/Img/intro_join.png"
				style="width: 80px; position: absolute;" />
				<div class="border_box_in">
					<button type="button" class="modal-cancel"
						style="position: absolute; background-color: r #CDCCCB; border: 0; margin-right: 10px; border-radius: 5px; right: 55px; margin-top: 10px;">
						<span style="color: white;"><i class="fa fa-times"></i></span>
					</button>
					<div style="margin: 60px 0 0 60px;">
						<div style="color: rgb(97, 117, 107);">
							<h2>프로필 사진 등록정보</h2>
							<h5>프로필 사진은 최대 4장까지 등록할 수 있습니다.</h5>
						</div>
						<div style="margin-top: 40px;">
						<form id="image_form_1" action="/tempimage" method="post" name="form" style="display: inline;">
							<span class="buttonWrap" style="display: inline-block; margin-right: 15px; height: 180px; width: 180px;"> 
								<input type="file" class="fileData2" name="1" style="height: 180px; width: 180px;"/>
								<input type="text" name="user_id" value="@user.id" style="display: none;" />
								<input type="text" name="num" value="1" style="display: none;" />
								@if(!user.image_url1.equals("")){
									<img id= "preview_1" class="preview" src="/image/@user.image_url1" style="height: 180px; width: 180px;"/>
								}else{
									<img id= "preview_1" class="preview" src="../assets/Img/profile_img.png" style="height: 180px; width: 180px;"/>
								}
								
							</span>
						</form>
						<form id="image_form_2" action="/tempimage" method="post" name="form" style="display: inline;"> 
							<span class="buttonWrap"
								style="display: inline-block; margin-right: 15px; height: 180px; width: 180px;"> <input
								type="file" class="fileData2" name="2" style="height: 180px; width: 180px;"/>
								<input type="text" name="user_id" value="@user.id"
								style="display: none;" /> <input type="text" name="num"
								value="2" style="display: none;" /> 
								@if(!user.image_url2.equals("")){
									<img id= "preview_2" class="preview" src="/image/@user.image_url2" style="height: 180px; width: 180px;"/>
								}else{
									<img id= "preview_2" class="preview" src="../assets/Img/profile_img.png" style="height: 180px; width: 180px;"/>
								}
							</span>
						</form>
						<form id="image_form_3" action="/tempimage" method="post" name="form" style="display: inline;">
							 <span class="buttonWrap"
								style="display: inline-block; margin-right: 15px; height: 180px; width: 180px;"> <input
								type="file" class="fileData2" name="3" style="height: 180px; width: 180px;" />
								<input type="text" name="user_id" value="@user.id"
								style="display: none;" /> <input type="text" name="num"
								value="3" style="display: none;" /> 
								@if(!user.image_url3.equals("")){
									<img id= "preview_3" class="preview" src="/image/@user.image_url3" style="height: 180px; width: 180px;"/>
								}else{
									<img id= "preview_3" class="preview" src="../assets/Img/profile_img.png" style="height: 180px; width: 180px;"/>
								}
							</span>
						</form>
						<form id="image_form_4" action="/tempimage" method="post" name="form" style="display: inline;">
						 <span class="buttonWrap"
								style="display: inline-block; margin-right: 15px; height: 180px; width: 180px;"> <input type="file" class="fileData2" name="4" style="height: 180px; width: 180px;"/>
								<input type="text" name="user_id" value="@user.id" style="display: none;" /> 
								<input type="text" name="num" value="4" style="display: none;" /> 
								@if(!user.image_url4.equals("")){
									<img id= "preview_4" class="preview" src="/image/@user.image_url4" style="height: 180px; width: 180px;"/>
								}else{
									<img id= "preview_4" class="preview" src="../assets/Img/profile_img.png" style="height: 180px; width: 180px;"/>
								}
							</span>
						</form>
						<form id="imageupload" method="post" action="/userimageupload" style="float: right; margin-right: 10px;">
							<input type="text" name="user_id" value="@user.id" style="display: none;" /> 
							<input type="text" name="image_1" value="" style="display: none;" />
							<input type="text" name="image_2" value="" style="display: none;" />
							<input type="text" name="image_3" value="" style="display: none;" />
							<input type="text" name="image_4" value="" style="display: none;" /> 
							<input type="image" style="width: 70px; margin-top: 110px;" src="../assets/Img/profile_img_end_btn.png"/>
						</form>
						</div>
					</div>
				</div>
			</div>
	</div>
	</div>
</body>
</html>